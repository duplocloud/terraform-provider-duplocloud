---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "duplocloud_aws_batch_job_queue Resource - terraform-provider-duplocloud"
subcategory: ""
description: |-
  duplocloud_aws_batch_job_queue manages an aws batch Job queue in Duplo.
---

# duplocloud_aws_batch_job_queue (Resource)

`duplocloud_aws_batch_job_queue` manages an aws batch Job queue in Duplo.

## Example Usage

```terraform
locals {
  tenant_id = "d186700c-ad18-4525-9593-aad467c843ff"
}

resource "duplocloud_aws_batch_scheduling_policy" "bsp" {
  tenant_id = local.tenant_id
  name      = "rtt"
  fair_share_policy {
    compute_reservation = 2
    share_decay_seconds = 3600

    share_distribution {
      share_identifier = "A1*"
      weight_factor    = 0.1
    }

    share_distribution {
      share_identifier = "A2"
      weight_factor    = 0.2
    }
  }

  tags = {
    "Name" = "Example Batch Scheduling Policy"
  }
}

resource "duplocloud_aws_batch_compute_environment" "bce" {
  tenant_id = local.tenant_id
  name      = "sample"

  compute_resources {

    ec2_configuration {
      image_type = "ECS_AL2"
    }

    instance_type = [
      "optimal",
    ]

    allocation_strategy = "BEST_FIT"

    max_vcpus     = 8
    min_vcpus     = 1
    desired_vcpus = 2

    bid_percentage = 100

    type = "EC2"
  }

  type = "MANAGED"

}

resource "duplocloud_aws_batch_job_queue" "jq" {
  tenant_id = local.tenant_id
  name      = "tf_job_queue"

  scheduling_policy_arn = duplocloud_aws_batch_scheduling_policy.bsp.arn
  state                 = "ENABLED"
  priority              = 1

  compute_environments = [
    duplocloud_aws_batch_compute_environment.bce.arn,
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **compute_environments** (List of String) Specifies the set of compute environments mapped to a job queue and their order. The position of the compute environments in the list will dictate the order.
- **name** (String) Specifies the name of the Job queue.
- **priority** (Number) The priority of the job queue. Job queues with a higher priority are evaluated first when associated with the same compute environment.
- **state** (String) The state of the job queue. Must be one of: `ENABLED` or `DISABLED`
- **tenant_id** (String) The GUID of the tenant that the aws batch Job queue will be created in.

### Optional

- **scheduling_policy_arn** (String) The ARN of the fair share scheduling policy. If this parameter is specified, the job queue uses a fair share scheduling policy. If this parameter isn't specified, the job queue uses a first in, first out (FIFO) scheduling policy. After a job queue is created, you can replace but can't remove the fair share scheduling policy.
- **tags** (Map of String) Key-value map of resource tags.
- **timeouts** (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- **wait_for_deployment** (Boolean) Defaults to `true`.

### Read-Only

- **arn** (String) The Amazon Resource Name of the Job queue.
- **fullname** (String) The full name of the Job queue.
- **id** (String) The ID of this resource.

<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- **create** (String)
- **delete** (String)

## Import

Import is supported using the following syntax:

```shell
# Example: Importing an existing AWS Batch Job Queue
#  - *TENANT_ID* is the tenant GUID
#  - *NAME* is the short name of Job Queue
#
terraform import duplocloud_aws_batch_job_queue.jq *TENANT_ID*/*NAME*
```
