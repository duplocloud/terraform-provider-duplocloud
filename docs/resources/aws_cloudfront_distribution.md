---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "duplocloud_aws_cloudfront_distribution Resource - terraform-provider-duplocloud"
subcategory: ""
description: |-
  duplocloud_aws_cloudfront_distribution manages an aws cloudfront distribution in Duplo.
---

# duplocloud_aws_cloudfront_distribution (Resource)

`duplocloud_aws_cloudfront_distribution` manages an aws cloudfront distribution in Duplo.

## Example Usage

```terraform
resource "duplocloud_tenant" "duplo-app" {
  account_name = "duplo-app"
  plan_id      = "default"
}

resource "duplocloud_aws_cloudfront_distribution" "cfd" {
  tenant_id           = duplocloud_tenant.duplo-app.tenant_id
  comment             = "duploservices-dev01-app"
  default_root_object = "index.html"
  enabled             = true
  http_version        = "http2"
  is_ipv6_enabled     = true
  aliases             = ["app-dev.abc.xyz"]
  price_class         = "PriceClass_All"
  wait_for_deployment = true

  origin {
    domain_name         = "pa-api-dev01.abc.xyz"
    origin_id           = "pa-api-dev01.abc.xyz"
    connection_attempts = 3
    connection_timeout  = 10
    custom_origin_config {
      http_port                = 80
      https_port               = 443
      origin_keepalive_timeout = 30
      origin_read_timeout      = 30
      origin_protocol_policy   = "https-only"
      origin_ssl_protocols     = ["TLSv1.2"]
    }
  }

  origin {
    domain_name         = "duploservices-dev01-abc-app-1234567890.s3.us-west-2.amazonaws.com"
    origin_id           = "duploservices-dev01-abc-app-1234567890.s3.us-west-2.amazonaws.com"
    connection_attempts = 3
    connection_timeout  = 10
  }


  default_cache_behavior {
    allowed_methods        = ["GET", "HEAD"]
    cached_methods         = ["GET", "HEAD"]
    target_origin_id       = "duploservices-dev01-abc-app-1234567890.s3.us-west-2.amazonaws.com"
    compress               = false
    viewer_protocol_policy = "redirect-to-https"
    min_ttl                = 0
    default_ttl            = 0
    max_ttl                = 0
  }

  ordered_cache_behavior {
    allowed_methods        = ["GET", "HEAD"]
    cached_methods         = ["GET", "HEAD"]
    target_origin_id       = "pa-api-dev01.abc.xyz"
    compress               = false
    viewer_protocol_policy = "redirect-to-https"
    min_ttl                = 0
    default_ttl            = 0
    max_ttl                = 0
    path_pattern           = "/api/*"
  }

  viewer_certificate {
    acm_certificate_arn      = "arn:aws:acm:us-east-1:1234567890:certificate/49c7a151-14b1-486e-801f-cf6bc9a43804"
    minimum_protocol_version = "TLSv1.2_2019"
    ssl_support_method       = "sni-only"
  }

  restrictions {
    geo_restriction {
      restriction_type = "none"
    }
  }

  lifecycle {
    ignore_changes = [
      wait_for_deployment,
    ]
  }

}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `default_cache_behavior` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--default_cache_behavior))
- `enabled` (Boolean) Whether the distribution is enabled to accept end user requests for content.
- `name` (String) Name of the distributiion
- `origin` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--origin))
- `tenant_id` (String) The GUID of the tenant that the aws cloudfront distribution will be created in.
- `viewer_certificate` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--viewer_certificate))

### Optional

- `aliases` (Set of String) Extra CNAMEs (alternate domain names), if any, for this distribution.
- `comment` (String, Deprecated) Any comments you want to include about the distribution. comment has been depreciated instead use name
- `cors_allowed_host_names` (List of String)
- `custom_error_response` (Block Set) (see [below for nested schema](#nestedblock--custom_error_response))
- `default_root_object` (String) The object that you want CloudFront to return (for example, index.html) when an end user requests the root URL.
- `http_version` (String) The maximum HTTP version to support on the distribution. Allowed values are `http1.1` and `http2` Defaults to `http2`.
- `is_ipv6_enabled` (Boolean) Defaults to `false`.
- `logging_config` (Block List, Max: 1) (see [below for nested schema](#nestedblock--logging_config))
- `ordered_cache_behavior` (Block List) (see [below for nested schema](#nestedblock--ordered_cache_behavior))
- `origin_group` (Block Set) (see [below for nested schema](#nestedblock--origin_group))
- `price_class` (String) The price class for this distribution. One of `PriceClass_All`, `PriceClass_200`, `PriceClass_100` Defaults to `PriceClass_All`.
- `restrictions` (Block List, Max: 1) (see [below for nested schema](#nestedblock--restrictions))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `use_origin_access_identity` (Boolean) Defaults to `true`.
- `wait_for_deployment` (Boolean) Defaults to `true`.
- `web_acl_id` (String) A unique identifier that specifies the AWS WAF web ACL, if any, to associate with this distribution.

### Read-Only

- `arn` (String)
- `domain_name` (String)
- `etag` (String)
- `hosted_zone_id` (String)
- `id` (String) The ID of this resource.
- `status` (String) The current status of the distribution. `Deployed` if the distribution's information is fully propagated throughout the Amazon CloudFront system.

<a id="nestedblock--default_cache_behavior"></a>
### Nested Schema for `default_cache_behavior`

Required:

- `allowed_methods` (Set of String)
- `cached_methods` (Set of String)
- `target_origin_id` (String)
- `viewer_protocol_policy` (String)

Optional:

- `cache_policy_id` (String) <br />						
| Policy name                                                                                                                                                                                  | Policy Id                            |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
| [Amplify](#https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/using-managed-cache-policies.html#managed-cache-policy-amplify)                                                | 2e54312d-136d-493c-8eb9-b001f22f67d2 |
| [CachingDisabled](#https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/using-managed-cache-policies.html#managed-cache-policy-caching-disabled)                               | 4135ea2d-6df8-44a3-9df3-4b5a84be39ad |
| [CachingOptimized](#https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/using-managed-cache-policies.html#managed-cache-caching-optimized)                                    | 658327ea-f89d-4fab-a63d-7e88639e58f6 |
| [CachingOptimizedForUncompressedObjects](#https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/using-managed-cache-policies.html#managed-cache-caching-optimized-uncompressed) | b2884449-e4de-46a7-ac36-70bc7f1ddd6d |
| [Elemental-MediaPackage](#https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/using-managed-cache-policies.html#managed-cache-policy-mediapackage)                            | 08627262-05a9-4f76-9ded-b50ca2e3a84f |
<br />
- `compress` (Boolean) Defaults to `false`.
- `default_ttl` (Number) default time to live: Not required when cache_policy_id is set
- `field_level_encryption_id` (String)
- `forwarded_values` (Block List, Max: 1) (see [below for nested schema](#nestedblock--default_cache_behavior--forwarded_values))
- `function_association` (Block Set, Max: 2) (see [below for nested schema](#nestedblock--default_cache_behavior--function_association))
- `lambda_function_association` (Block Set, Max: 4) (see [below for nested schema](#nestedblock--default_cache_behavior--lambda_function_association))
- `max_ttl` (Number) Maximum time to live: Not required when cache_policy_id is set
- `min_ttl` (Number) Minimum time to live: Not required when cache_policy_id is set Defaults to `0`.
- `origin_request_policy_id` (String)
- `realtime_log_config_arn` (String)
- `response_headers_policy_id` (String)
- `smooth_streaming` (Boolean)
- `trusted_key_groups` (List of String)
- `trusted_signers` (List of String)

<a id="nestedblock--default_cache_behavior--forwarded_values"></a>
### Nested Schema for `default_cache_behavior.forwarded_values`

Required:

- `cookies` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--default_cache_behavior--forwarded_values--cookies))
- `query_string` (Boolean)

Optional:

- `headers` (Set of String) headers: Not required when cache_policy_id is set
- `query_string_cache_keys` (List of String) query_string_cache_keys: Not required when cache_policy_id is set

<a id="nestedblock--default_cache_behavior--forwarded_values--cookies"></a>
### Nested Schema for `default_cache_behavior.forwarded_values.cookies`

Required:

- `forward` (String)

Optional:

- `whitelisted_names` (Set of String)



<a id="nestedblock--default_cache_behavior--function_association"></a>
### Nested Schema for `default_cache_behavior.function_association`

Required:

- `event_type` (String)
- `function_arn` (String)


<a id="nestedblock--default_cache_behavior--lambda_function_association"></a>
### Nested Schema for `default_cache_behavior.lambda_function_association`

Required:

- `event_type` (String)
- `lambda_arn` (String)

Optional:

- `include_body` (Boolean) Defaults to `false`.



<a id="nestedblock--origin"></a>
### Nested Schema for `origin`

Required:

- `domain_name` (String)
- `origin_id` (String)

Optional:

- `connection_attempts` (Number) Defaults to `3`.
- `connection_timeout` (Number) Defaults to `10`.
- `custom_header` (Block Set) (see [below for nested schema](#nestedblock--origin--custom_header))
- `custom_origin_config` (Block List, Max: 1) (see [below for nested schema](#nestedblock--origin--custom_origin_config))
- `origin_path` (String) Defaults to ``.
- `origin_shield` (Block List, Max: 1) (see [below for nested schema](#nestedblock--origin--origin_shield))
- `s3_origin_config` (Block List, Max: 1) (see [below for nested schema](#nestedblock--origin--s3_origin_config))

<a id="nestedblock--origin--custom_header"></a>
### Nested Schema for `origin.custom_header`

Required:

- `name` (String)
- `value` (String)


<a id="nestedblock--origin--custom_origin_config"></a>
### Nested Schema for `origin.custom_origin_config`

Required:

- `origin_protocol_policy` (String)
- `origin_ssl_protocols` (Set of String)

Optional:

- `http_port` (Number) Defaults to `80`.
- `https_port` (Number) Defaults to `443`.
- `origin_keepalive_timeout` (Number) Defaults to `5`.
- `origin_read_timeout` (Number) Defaults to `30`.


<a id="nestedblock--origin--origin_shield"></a>
### Nested Schema for `origin.origin_shield`

Required:

- `enabled` (Boolean)
- `origin_shield_region` (String)


<a id="nestedblock--origin--s3_origin_config"></a>
### Nested Schema for `origin.s3_origin_config`

Optional:

- `origin_access_identity` (String)



<a id="nestedblock--viewer_certificate"></a>
### Nested Schema for `viewer_certificate`

Optional:

- `acm_certificate_arn` (String)
- `cloudfront_default_certificate` (Boolean)
- `iam_certificate_id` (String)
- `minimum_protocol_version` (String) Defaults to `TLSv1.2_2021`.
- `ssl_support_method` (String) Defaults to `sni-only`.


<a id="nestedblock--custom_error_response"></a>
### Nested Schema for `custom_error_response`

Required:

- `error_code` (Number)

Optional:

- `error_caching_min_ttl` (Number)
- `response_code` (Number)
- `response_page_path` (String)


<a id="nestedblock--logging_config"></a>
### Nested Schema for `logging_config`

Required:

- `bucket` (String)

Optional:

- `include_cookies` (Boolean) Defaults to `false`.
- `prefix` (String) Defaults to ``.


<a id="nestedblock--ordered_cache_behavior"></a>
### Nested Schema for `ordered_cache_behavior`

Required:

- `allowed_methods` (Set of String)
- `cached_methods` (Set of String)
- `path_pattern` (String)
- `target_origin_id` (String)
- `viewer_protocol_policy` (String)

Optional:

- `cache_policy_id` (String)
- `compress` (Boolean) Defaults to `false`.
- `default_ttl` (Number)
- `field_level_encryption_id` (String)
- `forwarded_values` (Block List, Max: 1) (see [below for nested schema](#nestedblock--ordered_cache_behavior--forwarded_values))
- `function_association` (Block Set, Max: 2) (see [below for nested schema](#nestedblock--ordered_cache_behavior--function_association))
- `lambda_function_association` (Block Set, Max: 4) (see [below for nested schema](#nestedblock--ordered_cache_behavior--lambda_function_association))
- `max_ttl` (Number)
- `min_ttl` (Number) Defaults to `0`.
- `origin_request_policy_id` (String)
- `realtime_log_config_arn` (String)
- `response_headers_policy_id` (String)
- `smooth_streaming` (Boolean)
- `trusted_key_groups` (List of String)
- `trusted_signers` (List of String)

<a id="nestedblock--ordered_cache_behavior--forwarded_values"></a>
### Nested Schema for `ordered_cache_behavior.forwarded_values`

Required:

- `cookies` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--ordered_cache_behavior--forwarded_values--cookies))
- `query_string` (Boolean)

Optional:

- `headers` (Set of String)
- `query_string_cache_keys` (List of String)

<a id="nestedblock--ordered_cache_behavior--forwarded_values--cookies"></a>
### Nested Schema for `ordered_cache_behavior.forwarded_values.cookies`

Required:

- `forward` (String)

Optional:

- `whitelisted_names` (Set of String)



<a id="nestedblock--ordered_cache_behavior--function_association"></a>
### Nested Schema for `ordered_cache_behavior.function_association`

Required:

- `event_type` (String)
- `function_arn` (String)


<a id="nestedblock--ordered_cache_behavior--lambda_function_association"></a>
### Nested Schema for `ordered_cache_behavior.lambda_function_association`

Required:

- `event_type` (String)
- `lambda_arn` (String)

Optional:

- `include_body` (Boolean) Defaults to `false`.



<a id="nestedblock--origin_group"></a>
### Nested Schema for `origin_group`

Required:

- `failover_criteria` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--origin_group--failover_criteria))
- `member` (Block List, Min: 2, Max: 2) (see [below for nested schema](#nestedblock--origin_group--member))
- `origin_id` (String)

<a id="nestedblock--origin_group--failover_criteria"></a>
### Nested Schema for `origin_group.failover_criteria`

Required:

- `status_codes` (Set of Number)


<a id="nestedblock--origin_group--member"></a>
### Nested Schema for `origin_group.member`

Required:

- `origin_id` (String)



<a id="nestedblock--restrictions"></a>
### Nested Schema for `restrictions`

Required:

- `geo_restriction` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--restrictions--geo_restriction))

<a id="nestedblock--restrictions--geo_restriction"></a>
### Nested Schema for `restrictions.geo_restriction`

Required:

- `restriction_type` (String)

Optional:

- `locations` (Set of String)



<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)

## Import

Import is supported using the following syntax:

```shell
# Example: Importing an existing AWS Cloudfront Distribution
#  - *TENANT_ID* is the tenant GUID
#  - *CLOUDFRONT_ID* is the cloudfront id
#
terraform import duplocloud_aws_cloudfront_distribution.myCFD *TENANT_ID*/*CLOUDFRONT_ID*
```
