---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "duplocloud_azure_k8s_cluster Resource - terraform-provider-duplocloud"
subcategory: ""
description: |-
  duplocloud_azure_k8s_cluster manages an azure kubernetes cluster in Duplo.
---

# duplocloud_azure_k8s_cluster (Resource)

`duplocloud_azure_k8s_cluster` manages an azure kubernetes cluster in Duplo.

## Example Usage

```terraform
resource "duplocloud_infrastructure" "infra" {
  infra_name            = "tst-0206"
  account_id            = "143ffc59-9394-4ec6-8f5a-c408a238be62" // Subscription Id
  cloud                 = 2
  azcount               = 2
  region                = "West US 2"
  enable_k8_cluster     = false
  address_prefix        = "10.50.0.0/16"
  subnet_cidr           = 0
  subnet_name           = "sub01"
  subnet_address_prefix = "10.50.1.0/24"
}

resource "duplocloud_azure_k8s_cluster" "cluster" {
  infra_name = duplocloud_infrastructure.infra.infra_name
}

resource "duplocloud_azure_k8s_cluster" "ac" {
  infra_name                              = duplocloud_infrastructure.infra.infra_name
  private_cluster_enabled                 = true
  enable_workload_identity                = true
  enable_blob_csi_driver                  = true
  disable_run_command                     = true
  add_critical_taint_to_system_agent_pool = true
  enable_image_cleaner                    = true
  image_cleaner_interval_in_days          = 7
  pricing_tier                            = "Free"
  linux_admin_username                    = "kubuser"
  linux_ssh_public_key                    = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC666PWPnhOI3oc+4t4CmW6HtTKfns3uOa3ZW6EN57qti20Ln4SvoBT8mwMvwnZq6Z413Kp5MFbSdkVv1t+5ZXQ0E0NdJKM59O6bTtUriekkQoeoBgu2AU2Gmk20SbMZ/7lRJDhHYg0JM3HWup7RoL3tGEJDKmv0fZ1WYYsqGkX6Dc/XP1DfmUVwd2I41yVjDWpXY/FG9/t2tKoG4DONGOJY974C6P1cxhptWyt/yqzEU7VyOB3L/kdbhTe4Z64TEYSR57jW7GsnYBbmvX8lLTAhkIFbqENXNJHl26OcwCj4M8+HU2Y4oba7vTUxb7rcgQ0vDsYgjlK6zLzPs5mcbIzjTW4VMcXBC3bciiXlurXe+ByoEUSKiXAzgszg2aD6LlMWfS6jQwGDpnfC962RxeDv/EY8ggL7xBVTe9B8H3khbeLTQpFvDYtY1GwYq0+/911LHvdRJycP7GuEWghhSDGNmh1/MhG/Qgmqh49NYhKn1RNZkYn7ePxNkTUA7h9lyU= noname"
  network_plugin                          = "kubenet"
  active_directory_config {
    ad_tenant_id           = "<ad-tenant-id>"
    admin_group_object_ids = ["<admin-group-object-id>"]
    enable_ad              = true
    enable_rbac            = true
  }
  kubernetes_version = "1.31.5"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `infra_name` (String) The name of the infrastructure.

### Optional

- `active_directory_config` (Block List, Max: 1) Azure Active Directory configuration for the AKS cluster. (see [below for nested schema](#nestedblock--active_directory_config))
- `add_critical_taint_to_system_agent_pool` (Boolean) Add a critical taint to the system agent pool. This prevents the scheduler from scheduling non-critical pods on the system agent pool. Defaults to `false`.
- `disable_run_command` (Boolean) Disable the Run Command feature for the AKS cluster. This prevents the use of the Azure CLI to run commands directly on the nodes. Defaults to `false`.
- `enable_blob_csi_driver` (Boolean) Enable the Azure Blob CSI driver for the AKS cluster. This allows Kubernetes workloads to use Azure Blob Storage as persistent storage. Defaults to `false`.
- `enable_image_cleaner` (Boolean) Enable the image cleaner for the AKS cluster. This helps to clean up unused container images in the cluster. Defaults to `false`.
- `enable_workload_identity` (Boolean) Enable Workload Identity for the AKS cluster. This allows Kubernetes workloads to access Azure resources using Azure AD identities. Defaults to `false`.
- `image_cleaner_interval_in_days` (Number) Interval in days for the image cleaner to run. This determines how often the image cleaner will check for unused images. Valid values are between 1 and 90. Defaults to `30`.
- `kubernetes_version` (String) Version of Kubernetes specified when creating the AKS managed cluster.
- `linux_admin_username` (String) The username for the Linux administrator of the AKS cluster. This user will have administrative access to the nodes in the cluster.
- `linux_ssh_public_key` (String) The SSH public key for the Linux administrator of the AKS cluster. This key will be used to access the nodes in the cluster via SSH.
- `name` (String) The name of the aks. If not specified default name would be infra name
- `network_plugin` (String) Network plugin to use for networking. Valid values are: `azure` and `kubenet`.
- `outbound_type` (String) The outbound (egress) routing method which should be used for this Kubernetes Cluster. Valid values are: `loadBalancer` and `userDefinedRouting`.
- `pricing_tier` (String) Pricing tier for the AKS cluster. Valid values are: `Free`, `Standard`, and `Premium`. This determines the level of support and features available for the AKS cluster.
- `private_cluster_enabled` (Boolean) Should this Kubernetes Cluster have its API server only exposed on internal IP addresses? This provides a Private IP Address for the Kubernetes API on the Virtual Network where the Kubernetes Cluster is located. Defaults to `false`.
- `resource_group_name` (String) The name of the aks resource group.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `vm_size` (String) The size of the Virtual Machine.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--active_directory_config"></a>
### Nested Schema for `active_directory_config`

Required:

- `ad_tenant_id` (String) The Azure Active Directory tenant ID.

Optional:

- `admin_group_object_ids` (List of String) List of Azure AD group object IDs that have admin access to the AKS cluster.
- `enable_ad` (Boolean) Enable Azure Active Directory integration. Defaults to `false`.
- `enable_rbac` (Boolean) Enable Azure RBAC for Kubernetes authorization. Defaults to `false`.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)

## Import

Import is supported using the following syntax:

```shell
# Example: Importing an existing Azure K8S Cluster
#  - *INFRA_NAME* is the infrastructure name
#
terraform import duplocloud_azure_k8s_cluster.cluster v2/admin/InfrastructureV2/*INFRA_NAME*
```
