---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "duplocloud_ecache_instance Resource - terraform-provider-duplocloud"
subcategory: ""
description: |-
  duplocloud_ecache_instance manages an ElastiCache instance in Duplo.
---

# duplocloud_ecache_instance (Resource)

`duplocloud_ecache_instance` manages an ElastiCache instance in Duplo.

## Example Usage

```terraform
resource "duplocloud_tenant" "myapp" {
  account_name = "myapp"
  plan_id      = "default"
}

resource "duplocloud_ecache_instance" "mycache" {
  tenant_id                  = duplocloud_tenant.myapp.tenant_id
  name                       = "mycache"
  cache_type                 = 0 // Redis
  replicas                   = 1
  size                       = "cache.t2.small"
  enable_cluster_mode        = true  // applicable only for redis
  number_of_shards           = 1     // applicable only for redis
  automatic_failover_enabled = false // enable auto failover, set replicas to 2 or more
  engine_version             = var.engine_version

  log_delivery_configuration {
    log_group        = "/elasticache/redis"
    destination_type = "cloudwatch-logs"
    log_format       = "text"
    log_type         = "slow-log"
  }

  log_delivery_configuration {
    log_group        = "/elasticache/redis"
    destination_type = "cloudwatch-logs"
    log_format       = "json"
    log_type         = "engine-log"
  }

}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The short name of the elasticache instance.  Duplo will add a prefix to the name.  You can retrieve the full name from the `identifier` attribute.
- `size` (String) The instance type of the elasticache instance.
See AWS documentation for the [available instance types](https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/CacheNodes.SupportedTypes.html).
- `tenant_id` (String) The GUID of the tenant that the elasticache instance will be created in.

### Optional

- `auth_token` (String) Set a password for authenticating to the ElastiCache instance.  Only supported if `encryption_in_transit` is to to `true`.

See AWS documentation for the [required format](https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/auth.html) of this field.
- `automatic_failover_enabled` (Boolean) Enables automatic failover. Defaults to `false`.
- `cache_type` (Number) The numerical index of elasticache instance type.
Should be one of:

   - `0` : Redis
   - `1` : Memcache

 Defaults to `0`.
- `enable_cluster_mode` (Boolean) Flag to enable/disable redis cluster mode.
- `encryption_at_rest` (Boolean) Enables encryption-at-rest. Defaults to `false`.
- `encryption_in_transit` (Boolean) Enables encryption-in-transit. Defaults to `false`.
- `engine_version` (String) The engine version of the elastic instance.
See AWS documentation for the [available Redis instance types](https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/supported-engine-versions.html) or the [available Memcached instance types](https://docs.aws.amazon.com/AmazonElastiCache/latest/mem-ug/supported-engine-versions-mc.html).
- `kms_key_id` (String) The globally unique identifier for the key.
- `log_delivery_configuration` (Block Set, Max: 2) (see [below for nested schema](#nestedblock--log_delivery_configuration))
- `number_of_shards` (Number) The number of shards to create.
- `parameter_group_name` (String) The REDIS parameter group to supply.
- `replicas` (Number) The number of replicas to create. Defaults to `1`.
- `snapshot_arns` (List of String) Specify the ARN of a Redis RDB snapshot file stored in Amazon S3. User should have the access to export snapshot to s3 bucket. One can find steps to provide access to export snapshot to s3 on following link https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/backups-exporting.html
- `snapshot_name` (String) Select the snapshot/backup you want to use for creating redis.
- `snapshot_retention_limit` (Number) Specify retention limit in days. Accepted values - 1-35.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `arn` (String) The ARN of the elasticache instance.
- `endpoint` (String) The endpoint of the elasticache instance.
- `host` (String) The DNS hostname of the elasticache instance.
- `id` (String) The ID of this resource.
- `identifier` (String) The full name of the elasticache instance.
- `instance_status` (String) The status of the elasticache instance.
- `port` (Number) The listening port of the elasticache instance.

<a id="nestedblock--log_delivery_configuration"></a>
### Nested Schema for `log_delivery_configuration`

Required:

- `destination_type` (String) destination type : must be cloudwatch-logs.
Refer: https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/CLI_Log.html
- `log_format` (String) log_format: Value must be one of the ['json', 'text']
- `log_type` (String) log_type: Value must be one of the ['slow-log', 'engine-log']

Optional:

- `log_group` (String) cloudwatch log_group


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `update` (String)

## Import

Import is supported using the following syntax:

```shell
# Example: Importing an existing AWS ElastiCache cluster
#  - *TENANT_ID* is the tenant GUID
#  - *SHORT_NAME* is the short name of the AWS ElastiCache cluster
#
terraform import duplocloud_ecache_instance.mycluster v2/subscriptions/*TENANT_ID*/ECacheDBInstance/*SHORT_NAME*
```
