---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "duplocloud_infrastructure_onprem Resource - terraform-provider-duplocloud"
subcategory: ""
description: |-
  duplocloud_infrastructure_onprem adds support to integrate on premise infra into duplocloud
---

# duplocloud_infrastructure_onprem (Resource)

`duplocloud_infrastructure_onprem` adds support to integrate on premise infra into duplocloud

## Example Usage

```terraform
### Create a DuploCloud onpremise infrastructure named onprem with eks vendor

#### Solution:

resource "duplocloud_infrastructure_onprem" "infra" {
  infra_name                         = "onprem"
  cluster_name                       = "onprem"
  region                             = "us-west-2"
  azcount                            = 2
  enable_k8_cluster                  = true
  vendor                             = 2
  cluster_endpoint                   = "https://BB3C2589BAE34AD680060B5FDBA12BA1.gr7.us-west-2.eks.amazonaws.com"
  api_token                          = "<api-token>"
  cluster_certificate_authority_data = "<certificate-authority-data>"
  data_center                        = "us"
  eks_config {
    private_subnets            = ["subnet-06c1b3a338ace60ce", "subnet-09252308e1a093bda"]
    public_subnets             = ["subnet-0d5b3c3a3ae9d129f", "subnet-065ab3e894092dd1c"]
    ingress_security_group_ids = ["sg-0331e348b886ed796"]
    vpc_id                     = "vpc-0961fc6b0903ad63f"
  }
  custom_data {
    key   = "K8sVersion"
    value = "1.31"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `api_token` (String) Token to access cluster API's
- `cluster_certificate_authority_data` (String) Required to validate API server certificates and kubelet client certificates
- `cluster_endpoint` (String) Endpoint URL of K8 cluster
- `cluster_name` (String) Name of the on premise k8 cluster
- `data_center` (String) Datacenter name of the onpremise cluster
- `enable_k8_cluster` (Boolean) Whether or not to provision a kubernetes cluster.
- `infra_name` (String) The name of the infrastructure.  Infrastructure names are globally unique and less than 13 characters.
- `region` (String) The cloud provider region.  The Duplo portal must have already been configured to support this region.
- `vendor` (Number) Type of on premise vendor <br>0 - Rancher<br>1 - Generic<br>2 - EKS<br>

### Optional

- `account_id` (String) The cloud account ID. Used with GCP cloud
- `azcount` (Number) The number of availability zones.  Must be one of: `2`, `3`, or `4`. This is applicable only for AWS.
- `custom_data` (Block List) A list of configuration settings to apply on creation, expressed as key / value pairs. (see [below for nested schema](#nestedblock--custom_data))
- `eks_config` (Block List, Max: 1) EKS configuration for on premise infra if vendor is selected as 2 (see [below for nested schema](#nestedblock--eks_config))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The ID of this resource.
- `status` (String) The status of the infrastructure.

<a id="nestedblock--custom_data"></a>
### Nested Schema for `custom_data`

Required:

- `key` (String)
- `value` (String)


<a id="nestedblock--eks_config"></a>
### Nested Schema for `eks_config`

Required:

- `ingress_security_group_ids` (List of String) The security group IDs
- `private_subnets` (List of String) The private subnets for the VPC.
- `public_subnets` (List of String) The public subnets for the VPC.
- `vpc_id` (String) The the ID of a Virtual Private Cloud


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `update` (String)

## Import

Import is supported using the following syntax:

```shell
# Example: Importing an existing infrastructure
#  - *NAME* is the infrastructure name
#
terraform import duplocloud_infrastructure_onprem.myinfra v2/admin/Infrastructure/OnPremises/*NAME*
```
