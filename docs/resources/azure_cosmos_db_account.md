---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "duplocloud_azure_cosmos_db_account Resource - terraform-provider-duplocloud"
subcategory: ""
description: |-
  duplocloud_azure_cosmos_db manages cosmos db resource for azure
---

# duplocloud_azure_cosmos_db_account (Resource)

`duplocloud_azure_cosmos_db` manages cosmos db resource for azure

## Example Usage

```terraform
resource "duplocloud_tenant" "myapp" {
  account_name = "myapp"
  plan_id      = "default"
}


#Example of Azure Cosmos DB Account resource
# This example creates an Azure Cosmos DB Account will create a new Azure Cosmos DB account for provisioned type databases.
resource "duplocloud_azure_cosmos_db_account" "account" {
  tenant_id = duplocloud_tenant.myapp.tenant_id
  name      = "tfcosmotest"
  kind      = "GlobalDocumentDB"
  consistency_policy {
    default_consistency_level = "Session"
    max_staleness_prefix      = 100
    max_interval_in_seconds   = 5
  }
  disable_key_based_metadata_write_access = false
  public_network_access                   = "Enabled"
  backup_policy {
    backup_interval           = 240
    backup_retention_interval = 8
    backup_storage_redundancy = "Geo"
    type                      = "Periodic"
  }
  enable_free_tier = true #applicable only for provisioned type databases
}

#Example of Azure Cosmos DB Account resource
# This example creates an Azure Cosmos DB Account will create a new Azure Cosmos DB account for serverless type databases.
resource "duplocloud_azure_cosmos_db_account" "account" {
  tenant_id = duplocloud_tenant.myapp.tenant_id
  name      = "tfcosmotest"
  kind      = "GlobalDocumentDB"
  capabilities {
    name = "EnableServerless"
  }

  consistency_policy {
    default_consistency_level = "Session"
    max_staleness_prefix      = 100
    max_interval_in_seconds   = 5
  }
  disable_key_based_metadata_write_access = false
  public_network_access                   = "Enabled"
  backup_policy {
    backup_interval           = 240
    backup_retention_interval = 8
    backup_storage_redundancy = "Geo"
    type                      = "Periodic"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `kind` (String) Indicates the type of database account. This can only be set at database account creation. 
 Allowed Account Kind : GlobalDocumentDB, MongoDB, Parse
- `name` (String) The name for availability set
- `tenant_id` (String) The GUID of the tenant that the host will be created in.

### Optional

- `backup_policy` (Block List, Max: 1) Backup policy for cosmos db account. 
			> ⚠️ **Note:**: 
			> You can only configure backup_interval, backup_retention_interval and backup_storage_redundancy when the type field is set to periodic (see [below for nested schema](#nestedblock--backup_policy))
- `capabilities` (Block List) Name of the Cosmos DB capability (see [below for nested schema](#nestedblock--capabilities))
- `consistency_policy` (Block List) Specify the consistency policy for the Cosmos DB account. This is only applicable for GlobalDocumentDB accounts. (see [below for nested schema](#nestedblock--consistency_policy))
- `disable_key_based_metadata_write_access` (Boolean) Disable write operations on metadata resources (databases, containers, throughput) via account keys Defaults to `false`.
- `enable_free_tier` (Boolean) Flag to indicate whether Free Tier is enabled. Defaults to `false`.
- `public_network_access` (String) Flag to indicate whether to enable/disable public network access. Defaults to `Enabled`.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `type` (String) Specifies the  Cosmos DB account type. Defaults to `Microsoft.DocumentDB/databaseAccounts`.

### Read-Only

- `capacity_mode` (String)
- `id` (String) The ID of this resource.
- `locations` (String) An array that contains the georeplication locations enabled for the Cosmos DB account.

<a id="nestedblock--backup_policy"></a>
### Nested Schema for `backup_policy`

Optional:

- `backup_interval` (Number) Backup interval in minutes. Can be configured when type is set to Periodic
- `backup_retention_interval` (Number) Backup retention interval in hours
- `backup_storage_redundancy` (String) Backup storage redundancy type. Valid values are Geo, Local, Zone. Defaults to Geo.
- `type` (String) The type of backup. Possible values are Periodic and Continuous
						> ⚠️ **Note:**: 
						> Update from Periodic to Continuous type is allowed. To change from Periodic to Continuous resource need to be recreated Defaults to `Periodic`.

Read-Only:

- `continuous_mode_tier` (String) The continuous mode tier for the Cosmos DB account. This is only applicable if the backup policy type is Continuous.


<a id="nestedblock--capabilities"></a>
### Nested Schema for `capabilities`

Required:

- `name` (String) Name of the Cosmos DB capability, for example, 'EnableServerless'.


<a id="nestedblock--consistency_policy"></a>
### Nested Schema for `consistency_policy`

Optional:

- `default_consistency_level` (String) Specify the default consistency level and configuration settings of the Cosmos DB account. Possible values include: 'Eventual', 'Session', 'BoundedStaleness','Strong', 'ConsistentPrefix'
- `max_interval_in_seconds` (Number) When used with the 'Bounded Staleness' consistency level, this value represents the time amount of staleness (in seconds) tolerated. The accepted range for this value is 5 - 86400 (1 day). Required when consistency_level is set to BoundedStaleness.
- `max_staleness_prefix` (Number) When used with the 'Bounded Staleness' consistency level, this value represents the number of stale requests tolerated. The accepted range for this value is 10 – 2147483647. Defaults to 100. Required when 'consistency_level' is set to 'BoundedStaleness'


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)

## Import

Import is supported using the following syntax:

```shell
# Example: Importing an existing Azure CosmosDB Account
#  - *TENANT_ID* is the tenant GUID
#  - *NAME* is the name of the Azure Cosmosdb Account
#
terraform import duplocloud_azure_cosmos_db_account.account *TENANT_ID*/cosmosdb/account/*NAME*
```
