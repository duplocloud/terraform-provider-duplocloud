---

# Resource: duplocloud_duplo_service



A Duplo service is a microservice managed by the DuploCloud platform, which automates cloud infrastructure management. It abstracts complexities, allowing users to deploy, scale, and monitor cloud-native applications with minimal manual effort.

NOTE: For Amazon ECS services, see the `duplocloud_ecs_service` resource.


## Example Usage

### Deploy NGINX using Duplo's native container agent

```terraform
# Before creating an NGINX service, you must first set up the infrastructure and tenant. Below is the resource for creating the infrastructure.
resource "duplocloud_infrastructure" "infra" {
  infra_name        = "dev"
  cloud             = 0 # AWS Cloud
  region            = "us-east-1"
  enable_k8_cluster = false
  address_prefix    = "10.13.0.0/16"
}

# Use the infrastructure name as the 'plan_id' from the 'duplocloud_infrastructure' resource while creating tenant.
resource "duplocloud_tenant" "tenant" {
 account_name = "dev"
 plan_id      = duplocloud_infrastructure.infra.infra_name
}

resource "duplocloud_duplo_service" "nginx" {
  tenant_id = duplocloud_tenant.tenant.tenant_id

  name           = "nginx"
  agent_platform = 0 # Duplo native container agent
  docker_image   = "nginx:latest"
  replicas       = 1
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `docker_image` (String) The docker image to use for the launched container(s).
- `name` (String) The name of the service to create.
- `tenant_id` (String) The GUID of the tenant that the service will be created in.

### Optional

- `agent_platform` (Number) The numeric ID of the container agent to use for deployment.
Should be one of:

   - `0` : Duplo Native container agent
   - `7` : EKS linux container agent
 Defaults to `0`.
- `allocation_tags` (String)
- `any_host_allowed` (Boolean) Whether or not the service can run on hosts in other tenants (within the the same plan as the current tenant). Defaults to `false`.
- `cloud` (Number) The numeric ID of the cloud provider to launch the service in.
Should be one of:

   - `0` : AWS (Default)
   - `1` : Oracle
   - `2` : Azure
   - `3` : Google
   - `4` : Byoh
   - `5` : Unknown
   - `6` : DigitalOcean
   - `10` : OnPrem
 Defaults to `0`.
- `cloud_creds_from_k8s_service_account` (Boolean) Whether or not the service gets it's cloud credentials from Kubernetes service account. Defaults to `false`.
- `commands` (String)
- `extra_config` (String)
- `force_recreate_on_volumes_change` (Boolean) if 'force_recreate_on_volumes_change=true' and any changing to Volumes, will results in forceNew and hence recreating the resource. Defaults to `false`.
- `force_stateful_set` (Boolean) Whether or not to force a StatefulSet to be created. Defaults to `false`.
- `hpa_specs` (String)
- `is_daemonset` (Boolean) Whether or not to enable DaemonSet. Defaults to `false`.
- `is_unique_k8s_node_required` (Boolean) Whether or not the replicas must be scheduled on separate Kubernetes nodes.  Only supported on Kubernetes. Defaults to `false`.
- `lb_synced_deployment` (Boolean) Defaults to `false`.
- `other_docker_config` (String)
- `other_docker_host_config` (String)
- `replica_collocation_allowed` (Boolean) Allow replica collocation for the service. If this is set then 2 replicas can be on the same host.
- `replicas` (Number) The number of container replicas to deploy. Defaults to `1`.
- `replicas_matching_asg_name` (String)
- `should_spread_across_zones` (Boolean) Whether or not the replicas must be spread across availability zones.  Only supported on Kubernetes. Defaults to `false`.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `volumes` (String) Volumes to be attached to pod.

### Read-Only

- `domain` (String) The service domain (whichever fqdn_ex or fqdn which is non empty)
- `fqdn` (String) The fully qualified domain associated with the service
- `fqdn_ex` (String) External fully qualified domain associated with the service
- `id` (String) The ID of this resource.
- `index` (Number) The index of the service.
- `parent_domain` (String) The service's parent domain
- `tags` (List of Object) (see [below for nested schema](#nestedatt--tags))

<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `update` (String)


<a id="nestedatt--tags"></a>
### Nested Schema for `tags`

Read-Only:

- `key` (String)
- `value` (String)

## Import

Import is supported using the following syntax:

```shell
# Example: Importing an existing service
#  - *TENANT_ID* is the tenant GUID
#  - *NAME* is the name of the service
#
terraform import duplocloud_duplo_service.myservice v2/subscriptions/*TENANT_ID*/ReplicationControllerApiV2/*NAME*
```
